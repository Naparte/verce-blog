import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.8048b864.js";const F=JSON.parse('{"title":"换肤","description":"","frontmatter":{},"headers":[],"relativePath":"Deepunderstanding/P3 方案思路系列/3.换肤原理.md","filePath":"Deepunderstanding/P3 方案思路系列/3.换肤原理.md"}'),p={name:"Deepunderstanding/P3 方案思路系列/3.换肤原理.md"},o=l(`<h1 id="换肤" tabindex="-1">换肤 <a class="header-anchor" href="#换肤" aria-label="Permalink to &quot;换肤&quot;">​</a></h1><h2 id="方案一-css-样式覆盖实现" tabindex="-1">方案一：CSS 样式覆盖实现 <a class="header-anchor" href="#方案一-css-样式覆盖实现" aria-label="Permalink to &quot;方案一：CSS 样式覆盖实现&quot;">​</a></h2><p><code>核心原理：</code>通过切换 css 选择器的方式实现主题样式的切换.</p><ol><li>在组件中保留不变的样式，将需要变化的样式进行抽离</li><li>提供多种样式，给不同的主题定义一个对应的 CSS 选择器</li><li>根据不同主题设置不同的样式</li></ol><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/* 通过 .light 和 .dark 两个类选择器来区分明亮主题和暗黑主题，</span></span>
<span class="line"><span style="color:#6A737D;">并且事先准备了它们对应的样式 */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* light 默认主题*/</span></span>
<span class="line"><span style="color:#85E89D;">body</span><span style="color:#B392F0;">.light</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#fff</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* dark 暗黑主题 */</span></span>
<span class="line"><span style="color:#85E89D;">body</span><span style="color:#B392F0;">.dark</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">rgb</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">51</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/* 通过 .light 和 .dark 两个类选择器来区分明亮主题和暗黑主题，</span></span>
<span class="line"><span style="color:#6A737D;">并且事先准备了它们对应的样式 */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* light 默认主题*/</span></span>
<span class="line"><span style="color:#22863A;">body</span><span style="color:#6F42C1;">.light</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#fff</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* dark 暗黑主题 */</span></span>
<span class="line"><span style="color:#22863A;">body</span><span style="color:#6F42C1;">.dark</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">rgb</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">51</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">50</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">50</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>缺点：</p><ol><li>多种主题样式都要引入，导致代码量增大</li><li>当主题样式复杂时，需要维护大量的 CSS 类和规则，可能导致 CSS 文件臃肿</li></ol><h2 id="方案二-多套-css-主题样式" tabindex="-1">方案二：多套 CSS 主题样式 <a class="header-anchor" href="#方案二-多套-css-主题样式" aria-label="Permalink to &quot;方案二：多套 CSS 主题样式&quot;">​</a></h2><p><code>核心原理</code>: 根据用户切换操作，通过 link 标签动态加载不同的主题样式，解决所有主题打包到一个文件导致体积过大问题</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 关键代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">swapStylesheet</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">themeurl</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;themelink&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;href&quot;</span><span style="color:#E1E4E8;">, themeurl);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 关键代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">swapStylesheet</span><span style="color:#24292E;">(</span><span style="color:#E36209;">themeurl</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;themelink&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">setAttribute</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;href&quot;</span><span style="color:#24292E;">, themeurl);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>缺点：</p><ol><li>需要预先把<code>多套主题的样式都编译好</code>并存储在服务器上，增加了资源占用。且如果主题数量较多，可能会影响首次加载速度</li><li>需要提前知道打包后的文件路径，否则可能导致主题样式引入错误</li></ol><h2 id="方案三-css-自定义变量" tabindex="-1">方案三：CSS 自定义变量 <a class="header-anchor" href="#方案三-css-自定义变量" aria-label="Permalink to &quot;方案三：CSS 自定义变量&quot;">​</a></h2><p><code>缺点：</code>对老版本浏览器兼容性较差，需要做兼容处理。同时，CSS 变量无法在 IE 浏览器中使用</p><ul><li><code>MDN 解释：</code>var() CSS 函数可以插入一个自定义属性（有时也被称为“CSS 变量”）的值，用来代替非自定义属性中值的任何部分</li></ul><p><a href="https://code.juejin.cn/pen/7340962242009301029" target="_blank" rel="noreferrer">demo 地址</a></p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">/* default css */</span></span>
<span class="line"><span style="color:#B392F0;">:root</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--primary-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#3498db</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--secondary-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#2ecc71</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--text-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#333</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* test2.css */</span></span>
<span class="line"><span style="color:#B392F0;">:root</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--primary-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#34db58</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--secondary-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#cc2e2e</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">--text-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#6520dc</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/* default css */</span></span>
<span class="line"><span style="color:#6F42C1;">:root</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--primary-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#3498db</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--secondary-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#2ecc71</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--text-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#333</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* test2.css */</span></span>
<span class="line"><span style="color:#6F42C1;">:root</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--primary-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#34db58</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--secondary-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#cc2e2e</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">--text-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#6520dc</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 关键函数: 通过link标签外链切换主题样式</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">changeTheme</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> link </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;themelink&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      link.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;href&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        link.href.</span><span style="color:#B392F0;">includes</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;default.css&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;test2.css&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;default.css&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&lt;/</span><span style="color:#E1E4E8;">script</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 关键函数: 通过link标签外链切换主题样式</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">changeTheme</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> link </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;themelink&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      link.</span><span style="color:#6F42C1;">setAttribute</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;href&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        link.href.</span><span style="color:#6F42C1;">includes</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;default.css&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;test2.css&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;default.css&quot;</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">&lt;/</span><span style="color:#24292E;">script</span></span></code></pre></div>`,18),e=[o];function c(t,r,E,y,i,d){return n(),a("div",null,e)}const h=s(p,[["render",c]]);export{F as __pageData,h as default};
